{"ast":null,"code":"var _jsxFileName = \"/home/derfm53/save-agri/save-agri-frontend/src/components/FarmerPage.js\",\n  _s = $RefreshSig$();\n// save-agri-frontend/src/components/FarmerPage.js\nimport './FarmerPage.css';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { farmerService } from '../services/api';\nimport UpdateFarmerForm from './UpdateFarmerForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FarmerPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [farmer, setFarmer] = useState(null);\n  const [showUpdateForm, setShowUpdateForm] = useState(false);\n  const [error, setError] = useState('');\n\n  // Récupérer l'utilisateur connecté depuis le sessionStorage\n  const currentUser = JSON.parse(sessionStorage.getItem('user'));\n  useEffect(() => {\n    const fetchFarmer = async () => {\n      try {\n        const response = await farmerService.getFarmer(id);\n        setFarmer(response.data);\n      } catch (error) {\n        setError('Erreur lors du chargement des données');\n      }\n    };\n    fetchFarmer();\n  }, [id]);\n\n  // Vérifier si l'utilisateur courant est le propriétaire\n  const isOwner = currentUser && farmer && farmer.userId === currentUser.id;\n  const handleDelete = async () => {\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce profil ?')) {\n      try {\n        await farmerService.deleteFarmer(id);\n        navigate('/');\n      } catch (error) {\n        setError('Erreur lors de la suppression');\n      }\n    }\n  };\n  if (!farmer) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Chargement...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"farmer-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: farmer.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: farmer.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), isOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"action-buttons\",\n      style: {\n        marginTop: '20px',\n        padding: '20px',\n        borderTop: '1px solid #ddd'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowUpdateForm(!showUpdateForm),\n        style: {\n          marginRight: '10px',\n          padding: '10px 20px',\n          backgroundColor: '#4CAF50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        children: showUpdateForm ? 'Annuler' : 'Modifier'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#f44336',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        children: \"Supprimer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), isOwner && showUpdateForm && /*#__PURE__*/_jsxDEV(UpdateFarmerForm, {\n      farmer: farmer,\n      onUpdate: updatedFarmer => {\n        setFarmer(updatedFarmer);\n        setShowUpdateForm(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(FarmerPage, \"YVgg3psBr+S7mwwGQ7x2ts84aeg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = FarmerPage;\nexport default FarmerPage;\nvar _c;\n$RefreshReg$(_c, \"FarmerPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","farmerService","UpdateFarmerForm","jsxDEV","_jsxDEV","FarmerPage","_s","id","navigate","farmer","setFarmer","showUpdateForm","setShowUpdateForm","error","setError","currentUser","JSON","parse","sessionStorage","getItem","fetchFarmer","response","getFarmer","data","isOwner","userId","handleDelete","window","confirm","deleteFarmer","children","fileName","_jsxFileName","lineNumber","columnNumber","className","name","description","style","marginTop","padding","borderTop","onClick","marginRight","backgroundColor","color","border","borderRadius","cursor","onUpdate","updatedFarmer","_c","$RefreshReg$"],"sources":["/home/derfm53/save-agri/save-agri-frontend/src/components/FarmerPage.js"],"sourcesContent":["// save-agri-frontend/src/components/FarmerPage.js\nimport './FarmerPage.css';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { farmerService } from '../services/api';\nimport UpdateFarmerForm from './UpdateFarmerForm';\n\nfunction FarmerPage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [farmer, setFarmer] = useState(null);\n  const [showUpdateForm, setShowUpdateForm] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Récupérer l'utilisateur connecté depuis le sessionStorage\n  const currentUser = JSON.parse(sessionStorage.getItem('user'));\n\n  useEffect(() => {\n    const fetchFarmer = async () => {\n      try {\n        const response = await farmerService.getFarmer(id);\n        setFarmer(response.data);\n      } catch (error) {\n        setError('Erreur lors du chargement des données');\n      }\n    };\n    fetchFarmer();\n  }, [id]);\n\n  // Vérifier si l'utilisateur courant est le propriétaire\n  const isOwner = currentUser && farmer && farmer.userId === currentUser.id;\n\n  const handleDelete = async () => {\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce profil ?')) {\n      try {\n        await farmerService.deleteFarmer(id);\n        navigate('/');\n      } catch (error) {\n        setError('Erreur lors de la suppression');\n      }\n    }\n  };\n\n  if (!farmer) return <div>Chargement...</div>;\n  if (error) return <div>{error}</div>;\n\n  return (\n    <div className=\"farmer-page\">\n      {/* Affichage des informations existantes */}\n      <h1>{farmer.name}</h1>\n      <p>{farmer.description}</p>\n      {/* ...autres informations... */}\n\n      {/* Boutons d'action visibles uniquement pour le propriétaire */}\n      {isOwner && (\n        <div className=\"action-buttons\" style={{\n          marginTop: '20px',\n          padding: '20px',\n          borderTop: '1px solid #ddd'\n        }}>\n          <button \n            onClick={() => setShowUpdateForm(!showUpdateForm)}\n            style={{\n              marginRight: '10px',\n              padding: '10px 20px',\n              backgroundColor: '#4CAF50',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            {showUpdateForm ? 'Annuler' : 'Modifier'}\n          </button>\n          \n          <button \n            onClick={handleDelete}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#f44336',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            Supprimer\n          </button>\n        </div>\n      )}\n\n      {/* Formulaire de modification */}\n      {isOwner && showUpdateForm && (\n        <UpdateFarmerForm \n          farmer={farmer} \n          onUpdate={(updatedFarmer) => {\n            setFarmer(updatedFarmer);\n            setShowUpdateForm(false);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default FarmerPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
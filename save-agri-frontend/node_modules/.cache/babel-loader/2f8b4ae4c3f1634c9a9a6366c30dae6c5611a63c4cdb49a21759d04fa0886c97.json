{"ast":null,"code":"const INACTIVITY_TIMEOUT = 30 * 60 * 1000;\nlet inactivityTimer = null;\nlet tokenExpiryTimer = null;\nconst authService = {\n  login: (userData, token) => {\n    sessionStorage.setItem('user', JSON.stringify(userData));\n    sessionStorage.setItem('token', token);\n    authService.startInactivityTimer();\n  },\n  logout: () => {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    authService.clearTimers();\n  },\n  startInactivityTimer: () => {\n    authService.resetInactivityTimer();\n    // Ajouter l'écouteur d'événements pour réinitialiser le timer\n    document.addEventListener('mousemove', authService.resetInactivityTimer);\n  },\n  // Ajout de la méthode resetInactivityTimer\n  resetInactivityTimer: () => {\n    if (inactivityTimer) {\n      clearTimeout(inactivityTimer);\n    }\n    inactivityTimer = setTimeout(() => {\n      authService.logout();\n    }, INACTIVITY_TIMEOUT);\n  },\n  clearTimers: () => {\n    if (inactivityTimer) {\n      clearTimeout(inactivityTimer);\n      document.removeEventListener('mousemove', authService.resetInactivityTimer);\n    }\n    if (tokenExpiryTimer) {\n      clearTimeout(tokenExpiryTimer);\n    }\n  },\n  isAuthenticated: () => {\n    const token = sessionStorage.getItem('token');\n    return !!token;\n  },\n  getToken: () => {\n    return sessionStorage.getItem('token');\n  },\n  getCurrentUser: () => {\n    const userStr = sessionStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  }\n};\nexport default authService;","map":{"version":3,"names":["INACTIVITY_TIMEOUT","inactivityTimer","tokenExpiryTimer","authService","login","userData","token","sessionStorage","setItem","JSON","stringify","startInactivityTimer","logout","removeItem","clearTimers","resetInactivityTimer","document","addEventListener","clearTimeout","setTimeout","removeEventListener","isAuthenticated","getItem","getToken","getCurrentUser","userStr","parse"],"sources":["/home/derfm53/save-agri/save-agri-frontend/src/services/authService.js"],"sourcesContent":["const INACTIVITY_TIMEOUT = 30 * 60 * 1000;\n\nlet inactivityTimer = null;\nlet tokenExpiryTimer = null;\n\nconst authService = {\n  login: (userData, token) => {\n    sessionStorage.setItem('user', JSON.stringify(userData));\n    sessionStorage.setItem('token', token);\n    authService.startInactivityTimer();\n  },\n\n  logout: () => {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    authService.clearTimers();\n  },\n\n  startInactivityTimer: () => {\n    authService.resetInactivityTimer();\n    // Ajouter l'écouteur d'événements pour réinitialiser le timer\n    document.addEventListener('mousemove', authService.resetInactivityTimer);\n  },\n\n  // Ajout de la méthode resetInactivityTimer\n  resetInactivityTimer: () => {\n    if (inactivityTimer) {\n      clearTimeout(inactivityTimer);\n    }\n    inactivityTimer = setTimeout(() => {\n      authService.logout();\n    }, INACTIVITY_TIMEOUT);\n  },\n\n  clearTimers: () => {\n    if (inactivityTimer) {\n      clearTimeout(inactivityTimer);\n      document.removeEventListener('mousemove', authService.resetInactivityTimer);\n    }\n    if (tokenExpiryTimer) {\n      clearTimeout(tokenExpiryTimer);\n    }\n  },\n\n  isAuthenticated: () => {\n    const token = sessionStorage.getItem('token');\n    return !!token;\n  },\n\n  getToken: () => {\n    return sessionStorage.getItem('token');\n  },\n\n  getCurrentUser: () => {\n    const userStr = sessionStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  }\n};\n\nexport default authService;"],"mappings":"AAAA,MAAMA,kBAAkB,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;AAEzC,IAAIC,eAAe,GAAG,IAAI;AAC1B,IAAIC,gBAAgB,GAAG,IAAI;AAE3B,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAEA,CAACC,QAAQ,EAAEC,KAAK,KAAK;IAC1BC,cAAc,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAAC,CAAC;IACxDE,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;IACtCH,WAAW,CAACQ,oBAAoB,CAAC,CAAC;EACpC,CAAC;EAEDC,MAAM,EAAEA,CAAA,KAAM;IACZL,cAAc,CAACM,UAAU,CAAC,MAAM,CAAC;IACjCN,cAAc,CAACM,UAAU,CAAC,OAAO,CAAC;IAClCV,WAAW,CAACW,WAAW,CAAC,CAAC;EAC3B,CAAC;EAEDH,oBAAoB,EAAEA,CAAA,KAAM;IAC1BR,WAAW,CAACY,oBAAoB,CAAC,CAAC;IAClC;IACAC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEd,WAAW,CAACY,oBAAoB,CAAC;EAC1E,CAAC;EAED;EACAA,oBAAoB,EAAEA,CAAA,KAAM;IAC1B,IAAId,eAAe,EAAE;MACnBiB,YAAY,CAACjB,eAAe,CAAC;IAC/B;IACAA,eAAe,GAAGkB,UAAU,CAAC,MAAM;MACjChB,WAAW,CAACS,MAAM,CAAC,CAAC;IACtB,CAAC,EAAEZ,kBAAkB,CAAC;EACxB,CAAC;EAEDc,WAAW,EAAEA,CAAA,KAAM;IACjB,IAAIb,eAAe,EAAE;MACnBiB,YAAY,CAACjB,eAAe,CAAC;MAC7Be,QAAQ,CAACI,mBAAmB,CAAC,WAAW,EAAEjB,WAAW,CAACY,oBAAoB,CAAC;IAC7E;IACA,IAAIb,gBAAgB,EAAE;MACpBgB,YAAY,CAAChB,gBAAgB,CAAC;IAChC;EACF,CAAC;EAEDmB,eAAe,EAAEA,CAAA,KAAM;IACrB,MAAMf,KAAK,GAAGC,cAAc,CAACe,OAAO,CAAC,OAAO,CAAC;IAC7C,OAAO,CAAC,CAAChB,KAAK;EAChB,CAAC;EAEDiB,QAAQ,EAAEA,CAAA,KAAM;IACd,OAAOhB,cAAc,CAACe,OAAO,CAAC,OAAO,CAAC;EACxC,CAAC;EAEDE,cAAc,EAAEA,CAAA,KAAM;IACpB,MAAMC,OAAO,GAAGlB,cAAc,CAACe,OAAO,CAAC,MAAM,CAAC;IAC9C,OAAOG,OAAO,GAAGhB,IAAI,CAACiB,KAAK,CAACD,OAAO,CAAC,GAAG,IAAI;EAC7C;AACF,CAAC;AAED,eAAetB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
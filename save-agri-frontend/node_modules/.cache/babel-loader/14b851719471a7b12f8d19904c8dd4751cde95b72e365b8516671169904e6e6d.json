{"ast":null,"code":"const INACTIVITY_TIMEOUT = 30 * 60 * 1000;\nconst authService = {\n  login: (userData, token) => {\n    sessionStorage.setItem('user', JSON.stringify(userData));\n    sessionStorage.setItem('token', token);\n    authService.startInactivityTimer();\n  },\n  logout: () => {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    authService.clearTimers();\n  },\n  startInactivityTimer: () => {\n    let inactivityTimer = setTimeout(() => {\n      authService.logout();\n    }, INACTIVITY_TIMEOUT);\n    document.addEventListener('mousemove', () => {\n      clearTimeout(inactivityTimer);\n      inactivityTimer = setTimeout(() => {\n        authService.logout();\n      }, INACTIVITY_TIMEOUT);\n    });\n  },\n  clearTimers: () => {\n    clearTimeout(inactivityTimer);\n    clearTimeout(tokenExpiryTimer);\n  },\n  isAuthenticated: () => {\n    const token = sessionStorage.getItem('token');\n    return !!token;\n  },\n  getToken: () => {\n    return sessionStorage.getItem('token');\n  },\n  // Renommé de getUser à getCurrentUser\n  getCurrentUser: () => {\n    const userStr = sessionStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  }\n};\nlet inactivityTimer = null;\nlet tokenExpiryTimer = null;\nexport default authService;","map":{"version":3,"names":["INACTIVITY_TIMEOUT","authService","login","userData","token","sessionStorage","setItem","JSON","stringify","startInactivityTimer","logout","removeItem","clearTimers","inactivityTimer","setTimeout","document","addEventListener","clearTimeout","tokenExpiryTimer","isAuthenticated","getItem","getToken","getCurrentUser","userStr","parse"],"sources":["/home/derfm53/save-agri/save-agri-frontend/src/services/authService.js"],"sourcesContent":["const INACTIVITY_TIMEOUT = 30 * 60 * 1000;\n\nconst authService = {\n  login: (userData, token) => {\n    sessionStorage.setItem('user', JSON.stringify(userData));\n    sessionStorage.setItem('token', token);\n    authService.startInactivityTimer();\n  },\n\n  logout: () => {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n    authService.clearTimers();\n  },\n\n  startInactivityTimer: () => {\n    let inactivityTimer = setTimeout(() => {\n      authService.logout();\n    }, INACTIVITY_TIMEOUT);\n\n    document.addEventListener('mousemove', () => {\n      clearTimeout(inactivityTimer);\n      inactivityTimer = setTimeout(() => {\n        authService.logout();\n      }, INACTIVITY_TIMEOUT);\n    });\n  },\n\n  clearTimers: () => {\n    clearTimeout(inactivityTimer);\n    clearTimeout(tokenExpiryTimer);\n  },\n\n  isAuthenticated: () => {\n    const token = sessionStorage.getItem('token');\n    return !!token;\n  },\n\n  getToken: () => {\n    return sessionStorage.getItem('token');\n  },\n\n  // Renommé de getUser à getCurrentUser\n  getCurrentUser: () => {\n    const userStr = sessionStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  }\n};\n\nlet inactivityTimer = null;\nlet tokenExpiryTimer = null;\n\nexport default authService;"],"mappings":"AAAA,MAAMA,kBAAkB,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;AAEzC,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAEA,CAACC,QAAQ,EAAEC,KAAK,KAAK;IAC1BC,cAAc,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAAC,CAAC;IACxDE,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;IACtCH,WAAW,CAACQ,oBAAoB,CAAC,CAAC;EACpC,CAAC;EAEDC,MAAM,EAAEA,CAAA,KAAM;IACZL,cAAc,CAACM,UAAU,CAAC,MAAM,CAAC;IACjCN,cAAc,CAACM,UAAU,CAAC,OAAO,CAAC;IAClCV,WAAW,CAACW,WAAW,CAAC,CAAC;EAC3B,CAAC;EAEDH,oBAAoB,EAAEA,CAAA,KAAM;IAC1B,IAAII,eAAe,GAAGC,UAAU,CAAC,MAAM;MACrCb,WAAW,CAACS,MAAM,CAAC,CAAC;IACtB,CAAC,EAAEV,kBAAkB,CAAC;IAEtBe,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAE,MAAM;MAC3CC,YAAY,CAACJ,eAAe,CAAC;MAC7BA,eAAe,GAAGC,UAAU,CAAC,MAAM;QACjCb,WAAW,CAACS,MAAM,CAAC,CAAC;MACtB,CAAC,EAAEV,kBAAkB,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC;EAEDY,WAAW,EAAEA,CAAA,KAAM;IACjBK,YAAY,CAACJ,eAAe,CAAC;IAC7BI,YAAY,CAACC,gBAAgB,CAAC;EAChC,CAAC;EAEDC,eAAe,EAAEA,CAAA,KAAM;IACrB,MAAMf,KAAK,GAAGC,cAAc,CAACe,OAAO,CAAC,OAAO,CAAC;IAC7C,OAAO,CAAC,CAAChB,KAAK;EAChB,CAAC;EAEDiB,QAAQ,EAAEA,CAAA,KAAM;IACd,OAAOhB,cAAc,CAACe,OAAO,CAAC,OAAO,CAAC;EACxC,CAAC;EAED;EACAE,cAAc,EAAEA,CAAA,KAAM;IACpB,MAAMC,OAAO,GAAGlB,cAAc,CAACe,OAAO,CAAC,MAAM,CAAC;IAC9C,OAAOG,OAAO,GAAGhB,IAAI,CAACiB,KAAK,CAACD,OAAO,CAAC,GAAG,IAAI;EAC7C;AACF,CAAC;AAED,IAAIV,eAAe,GAAG,IAAI;AAC1B,IAAIK,gBAAgB,GAAG,IAAI;AAE3B,eAAejB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}